(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{169:function(t,e,n){var content=n(193);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(49).default)("5713ef85",content,!0,{sourceMap:!1})},192:function(t,e,n){"use strict";var o=n(169);n.n(o).a},193:function(t,e,n){(t.exports=n(48)(!1)).push([t.i,".container[data-v-6f73f825]{padding:12px}canvas[data-v-6f73f825]{background:#556b2f}body[data-v-6f73f825]{background-color:#f0f0f0}#app[data-v-6f73f825]{text-align:center;color:#2c3e50;margin-top:60px}#video[data-v-6f73f825]{background-color:#000;width:100%}#canvas[data-v-6f73f825]{display:none}ul[data-v-6f73f825]{flex-direction:row;flex-wrap:nowrap}li[data-v-6f73f825],ul[data-v-6f73f825]{display:flex}li[data-v-6f73f825]{padding:5px}.imgBox.choose[data-v-6f73f825]{border-color:#3cb371}.imgBox[data-v-6f73f825]{background:transparent;margin:2px;border:4px solid transparent;border-radius:10px}.list-enter-active[data-v-6f73f825],.list-leave-active[data-v-6f73f825]{transition:all 1s}.list-enter[data-v-6f73f825],.list-leave-to[data-v-6f73f825]{opacity:0;transform:translateY(30px)}",""])},199:function(t,e,n){"use strict";n.r(e);n(176),n(37),n(17),n(182),n(52);var o=n(7),r=n(183),l=n.n(r),c=n(186),d=n.n(c),v=n(191),f={data:function(){return{video:{},canvas:{},captures:[],choose_idx:[],imgData:[],outImage:{}}},mounted:function(){var t=this;this.video=this.$refs.video,console.log(navigator.mediaDevices),console.log(navigator.mediaDevices.getUserMedia),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(console.log("Something went wrong!"),navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){t.video.srcObject=e,console.log(e),t.video.play()}).catch(function(t){console.log("Something went wrong!")}))},methods:{capture:function(){this.canvas=this.$refs.canvas,this.canvas.getContext("2d").drawImage(this.video,0,0,320,240),this.captures.push({img:this.canvas.toDataURL("image/png"),choose:!1})},choose:function(t){this.captures[t].choose=!this.captures[t].choose,this.choose_idx.push(t)},remove:function(){this.captures=this.captures.filter(function(t,e,n){return console.log(t),!1===t.choose}),this.choose_idx.length=0},runEnhance:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,n,o,r,data,c,f,h,m,w,x,k,y,_,D;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.canvas.getContext("2d"),n=document.getElementById("output"),o=n.getContext("2d"),r=e.getImageData(0,0,256,256),o.putImageData(r,0,0),data=r.data,c=r.width,f=r.height,h=l()(new Float32Array(data),[c,f,4]),m=l()(new Float32Array(c*f*3),[1,3,c,f]),d.a.assign(m.pick(0,0,null,null),h.pick(null,null,0)),d.a.assign(m.pick(0,1,null,null),h.pick(null,null,1)),d.a.assign(m.pick(0,2,null,null),h.pick(null,null,2)),d.a.divseq(m,255),w=[new v.Tensor(new Float32Array(m.data),"float32",[1,3,c,f])],console.log(w),x=new v.InferenceSession({backendHint:"wasm"}),t.next=17,x.loadModel("/unet_fast.onnx");case 17:return t.next=19,x.run(w);case 19:k=t.sent,y=k.values().next().value,_=l()(new Float32Array(y.data),[3,c,f]),D=l()(new Float32Array(c*f*4),[c,f,4]),d.a.assign(D.pick(null,null,0),_.pick(0,null,null)),d.a.assign(D.pick(null,null,1),_.pick(1,null,null)),d.a.assign(D.pick(null,null,2),_.pick(2,null,null)),d.a.mulseq(D,255),d.a.assigns(D.pick(null,null,3),255),this.outImage=new ImageData(new Uint8ClampedArray(D.data),c,f),o.putImageData(this.outImage,0,0);case 30:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},h=(n(192),n(20)),component=Object(h.a)(f,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-layout",{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs12:""}},[n("video",{ref:"video",attrs:{id:"video",width:"320",height:"240",autoplay:""}})]),t._v(" "),n("canvas",{ref:"output",attrs:{id:"output",width:"320",height:"240"}})],1),t._v(" "),n("v-layout",{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[n("v-flex",{attrs:{shrink:""}},[n("v-btn",{staticClass:"green",attrs:{id:"snap"},on:{click:function(e){return t.capture()}}},[t._v("Snap Photo")]),t._v(" "),n("v-btn",{staticClass:"red",attrs:{id:"rm"},on:{click:function(e){return t.remove()}}},[t._v("Remove")]),t._v(" "),n("v-btn",{staticClass:"orange",attrs:{id:"m"},on:{click:function(e){return t.runEnhance()}}},[t._v("RunModel")]),t._v(" "),n("canvas",{ref:"canvas",attrs:{id:"canvas",width:"320",height:"240"}}),t._v(" "),n("v-img",{attrs:{id:"i"}})],1)],1),t._v(" "),n("v-container",{attrs:{"grid-list-xl":"",fluid:""}},[n("v-layout",{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},t._l(t.captures,function(e,o){return n("v-flex",{key:e.img,staticClass:"imgBox",class:{choose:e.choose},attrs:{xs2:"","d-flex":""}},[n("v-card",{staticClass:"d-flex",attrs:{flat:""},on:{click:function(e){return t.choose(o)}}},[n("v-img",{staticClass:"grey lighten-2",attrs:{src:e.img,alt:"."}})],1)],1)}),1)],1)],1)},[],!1,null,"6f73f825",null);e.default=component.exports}}]);